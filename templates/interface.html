<!DOCTYPE HTML>
<html>
  <head>
    <title>ChristmasGITree</title>
    <link href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.0/flatly/bootstrap.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script type="text/javascript">
      $( document ).ready(function() {
        $('button.on').click(function () {
          data = {
            'type': 'on',
            'restore': false
          }
          callAjaxPlay(data, 'Turned on!');
        });
        $('button.off').click(function () {
          data = {
            'type': 'off',
            'restore': false
          }
          callAjaxPlay(data, 'Turned off!');
        });
        $('button.restore').click(function () {
          data = {
            'type': 'restore'
          }
          callAjaxPlay(data, 'Restored!');
        });
        $('button.disco').click(function () {
          data = {
            'type': 'disco',
            'restore': true,
            'loops': Math.floor((Math.random() * 100) + 10),
            'colors': randColors()
          }
          callAjaxPlay(data, 'Restored!');
        });
        function callAjaxPlay(data, message) {
          $.ajax({
            url: "/play",
            method: 'POST',
            contentType: "application/json",
            dataType: 'json',
            headers: {
              'Awesome-Security': 'Value'
            },
            data: JSON.stringify(data)
          }).done(function(data) {
            $("#console").prepend("<div>" + message + "</div>");
          });
        }
        function randColors() {
          data = [];
          for (i = 0; i < Math.floor((Math.random() * 10) + 1); i++) {
            data.push(randColor());
          }
          return data;
        }
        function randColor() {
          return {
            'r': Math.floor((Math.random() * 200)),
            'g': Math.floor((Math.random() * 200)),
            'b': Math.floor((Math.random() * 200))
          }
        }
      });
    </script>
    <style>
      #console {
        max-height: 100px;
        overflow: auto;
      }
    </style>
  </head>

  <body>
    <div class="container-fluid">
      <h1>Manage ChristmasGITree</h1>
      <p>Let us light up christmas tree together.</p>
      <button type="button" class="btn btn-success on">Turn lights on!</button><br />
      <button type="button" class="btn btn-warning off">Turn lights off!</button><br />
      <button type="button" class="btn btn-default restore">Restore!</button><br />
      <button type="button" class="btn btn-default disco">DiScO!</button><br />
      <br />
      <div class="progress progress-striped active">
        <div class="progress-bar" style="width: {{ percentage }}%">{{ value }}</div>
      </div>
      <br />
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title">Panel info</h3>
        </div>
        <div class="panel-body" id="console">
          <div>Results:</div>
        </div>
      </div>
    </div>
  </body>
</html>
